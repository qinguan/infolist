<html>
<head>
<title>Scripts Python
</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="STYLESHEET" href="../doc.css">
</head>
<BODY bgcolor="#71B559" LINK="#FFFFCC" VLINK="#FFFFCC" LEFTMARGIN="0" TOPMARGIN="0">
<table cellpadding="0" cellspacing="0">
<tr>
<td class="side">&nbsp;</td>
<td>
    <table class="header" cellpadding="0" cellspacing="0">
    <tr>
        <td>
            <a href="../../index.html"><img src="../images/karrigell_skeudenn.png" border="0"></a>
        </td>
        <td class="headertext">
            <td class="headertext1">
                <center>
                <font size="+2"><b>Karrigell Documentation</b></font>
                <p>
                <table width="70%" cellpadding="0" cellspacing="0"><tr>
                <td class="info" align="left"><strong>Version 2.3.5</strong></td>
                <td class="info" align="right">19 05 07</td>
                </tr></table>
                </center>
            </td>
            <td class="headertext2">
                <a class="header" href="../en/pythonscripts.htm">English</a>
            </td>
        </td>
    </tr>
    </table>
</td>
</tr>
<tr><td class="menu" valign="top"><a class="menu" href="front.htm">
1. Introduction
</a><br><a class="menu" href="install.htm">
2. Installation
</a><br><a class="menu" href="webserveroptions.htm">
3. Le serveur Web
</a><br><a class="menu" href="configuration.htm">
4. Options de configuration
</a><br><a class="menu" href="apache.htm">
5. Travailler avec Apache, LightTPD ou Xitami
</a><br><a class="menu" href="programming.htm">
6. Programmation
</a><br><a class="menu" href="debugging.htm">
7. Debogage
</a><br><span class="sel">
8. Scripts Python
</span><br><a class="menu" href="cgi.htm">
9. Scripts CGI
</a><br><a class="menu" href="karrigellservices.htm">
10. Services Karrigell
</a><br><a class="menu" href="pythoninsidehtml.htm">
11. Python Inside HTML
</a><br><a class="menu" href="htmlinsidepython.htm">
12. HTML Inside Python
</a><br><a class="menu" href="htmltags.htm">
13. HTMLTags - génère du HTML en Python
</a><br><a class="menu" href="include.htm">
14. Inclure des documents
</a><br><a class="menu" href="sessions.htm">
15. Sessions
</a><br><a class="menu" href="authentication.htm">
16. Authentification
</a><br><a class="menu" href="internationalization.htm">
17. Traduction et Unicode
</a><br><a class="menu" href="namespace.htm">
18. Résumé des noms intégrés</a><br></td>
<td class="content">
<h1>8. Les scripts Python</h1>
<p>Exécuter des scripts Python avec Karrigell, c'est facile. Ouvrez votre éditeur de code Python
préféré, créez le script suivant :</p>
<dl><dd><pre class="verbatim">
print &quot;Bonjour Karrigell !&quot;
</pre></dl>
<p>et sauvegardez-le sous le nom <span class="file">bonjour.py</span> dans le <a href="webserveroptions.htm#root">
Répertoire Racine</a>. Ensuite, tapez <span class="url">http://localhost/bonjour.py</span> et vous
devriez voir le message apparaître sur votre écran</p>
<p>Les scripts Python exécutés avec Karrigell sont des scripts Python ordinaires, sauf que les
instructions <code>print</code> envoient les messages vers le navigateur du client au lieu de la
fenêtre de la console. Il faut donc écrire du code HTML pour avoir le formattage voulu ; pour une
table minimum il faudra écrire quelque chose comme</p>
<dl><dd><pre class="verbatim">
print &quot;&lt;TABLE&gt;&quot;
print &quot;&lt;TR&gt;&quot;
print &quot;&lt;TD&gt;Nom&lt;/TD&gt;&quot;
print &quot;&lt;TD&gt;Adresse&lt;/TD&gt;&quot;
print &quot;&lt;/TR&gt;&quot;
print &quot;&lt;/TABLE&gt;&quot;
</pre></dl>
<p>ou, en utilisant la syntaxe de Python sur plusieurs lignes :</p>
<dl><dd><pre class="verbatim">
print &quot;&quot;&quot;&lt;TABLE&gt;
      &lt;TR&gt;
        &lt;TD&gt;Nom&lt;/TD&gt;
        &lt;TD&gt;Adresse&lt;/TD&gt;
      &lt;/TR&gt;
    &lt;/TABLE&gt;&quot;&quot;&quot;
</pre></dl>
ou, si vous voulez utiliser le module <a href="htmltags.htm">HTMLTags</a> :
<p>
<dl><dd><pre class="verbatim">
from HTMLTags import *
print TABLE(TR(TD("Nom")+TD("Adresse")))
</pre></dl>
<p>Si vous écrivez des scripts Python qui ne doivent pas être exécutés dans Karrigell 
(par exemple parce qu'elles ont une interaction avec l'utilisateur basée sur une
interface graphique) vous pouvez inclure ce code au début de votre script :
<p>
<dl><dd><pre class="verbatim">
try:
    SCRIPT_END
except NameError:
    pass
else:
    print "Vous ne pouvez pas exécuter ce script dans Karrigell"
    raise SCRIPT_END
    
(... reste de votre script ici ...)
</pre></dl>
<p>Comme <code>SCRIPT_END</code> est dans l'espace de noms des scripts Python 
quand ils sont exécutés dans Karrigell, l'exécution s'arrête dans ce cas ; 
quand ils sont exécutés depuis la ligne de commande, une exception
<code>NameError</code> est déclenchée, et elle est ignorée par le script
</body>
</html>
</td>
</tr></table>