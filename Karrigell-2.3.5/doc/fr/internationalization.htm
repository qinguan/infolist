<html>
<head>
<title>Traduction et Unicode
</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="STYLESHEET" href="../doc.css">
</head>
<BODY bgcolor="#71B559" LINK="#FFFFCC" VLINK="#FFFFCC" LEFTMARGIN="0" TOPMARGIN="0">
<table cellpadding="0" cellspacing="0">
<tr>
<td class="side">&nbsp;</td>
<td>
    <table class="header" cellpadding="0" cellspacing="0">
    <tr>
        <td>
            <a href="../../index.html"><img src="../images/karrigell_skeudenn.png" border="0"></a>
        </td>
        <td class="headertext">
            <td class="headertext1">
                <center>
                <font size="+2"><b>Karrigell Documentation</b></font>
                <p>
                <table width="70%" cellpadding="0" cellspacing="0"><tr>
                <td class="info" align="left"><strong>Version 2.3.5</strong></td>
                <td class="info" align="right">19 05 07</td>
                </tr></table>
                </center>
            </td>
            <td class="headertext2">
                <a class="header" href="../en/internationalization.htm">English</a>
            </td>
        </td>
    </tr>
    </table>
</td>
</tr>
<tr><td class="menu" valign="top"><a class="menu" href="front.htm">
1. Introduction
</a><br><a class="menu" href="install.htm">
2. Installation
</a><br><a class="menu" href="webserveroptions.htm">
3. Le serveur Web
</a><br><a class="menu" href="configuration.htm">
4. Options de configuration
</a><br><a class="menu" href="apache.htm">
5. Travailler avec Apache, LightTPD ou Xitami
</a><br><a class="menu" href="programming.htm">
6. Programmation
</a><br><a class="menu" href="debugging.htm">
7. Debogage
</a><br><a class="menu" href="pythonscripts.htm">
8. Scripts Python
</a><br><a class="menu" href="cgi.htm">
9. Scripts CGI
</a><br><a class="menu" href="karrigellservices.htm">
10. Services Karrigell
</a><br><a class="menu" href="pythoninsidehtml.htm">
11. Python Inside HTML
</a><br><a class="menu" href="htmlinsidepython.htm">
12. HTML Inside Python
</a><br><a class="menu" href="htmltags.htm">
13. HTMLTags - génère du HTML en Python
</a><br><a class="menu" href="include.htm">
14. Inclure des documents
</a><br><a class="menu" href="sessions.htm">
15. Sessions
</a><br><a class="menu" href="authentication.htm">
16. Authentification
</a><br><span class="sel">
17. Traduction et Unicode
</span><br><span class="sel">
&nbsp;&nbsp;<small>17.1 Traduction</small></span><br><span class="sel">
&nbsp;&nbsp;<small>17.3 Prise en charge d'Unicode</small></span><br><a class="menu" href="namespace.htm">
18. Résumé des noms intégrés</a><br></td>
<td class="content">
<h1>17. Traduction et Unicode</h1>
<p>Comme les lecteurs de la documentation en anglais l'auront remarqué, je ne 
suis pas originaire d'un pays anglophone (je suis français, et plus précisément 
breton - "Karrigell" est un mot breton). J'ai donc inclus un programme pour 
faciliter l'internationalisation des scripts.
<h2>17.1 Traduction</h2>
<p>Dans un script, à chaque fois que vous voulez qu'un message soit traduit 
dans une langue donnée, au lieu de l'écrire comme une chaîne normale avec des 
guillemets, on l'écrit comme argument d'une fonction appelée _, de cette 
façon :
<dl><dd><pre class="verbatim">
print _("Bonjour tout le monde")
</pre></dl>
<p>Pour les scripts Python Inside HTML (PIH) il existe un raccourci, &lt;%_ &gt; :
<dl><dd><pre class="verbatim">
&lt;%_ "Bonjour tout le monde" %&gt;
</pre></dl>
<p>Karrigell fournit une 
interface web simple pour créer et modifier les traductions de chaînes.
Pour des raisons de sécurité, ce script est réservé à l'administrateur. 
Un script d'authentification est exécuté, il s'appuie sur des condensés md5 
stockés dans un fichier appelé <code>admin.ini</code>, que l'administrateur 
<b>doit</b> définir en exécutant le script <code>k_password.py</code>, dans
le répertoire <CODE>admin</CODE>
<p>Avec votre navigateur, appelez le script <code>
http://localhost/admin/internat.pih</code>. Il s'ouvre sur un explorateur de 
répertoires avec lequel on peut accéder à tous les fichiers susceptibles de 
contenir des chaînes à traduire (c'est-à-dire tous les fichiers qui ont une 
extension <code>.py, .pyw, .pih, .hip</code>). En cliquant sur le nom d'un 
fichier une page affiche toutes les chaînes à traduire (les arguments de la 
fonction <code>_()</code>) et demande une traduction dans toutes les langues 
qui sont actuellement sélectionnées dans les préférences du navigateur<sup>
<a href="#note1">(1)</a></sup>. Si des traductions ont déjà été faites elles 
apparaissent dans les champs du formulaire
<p>Remplissez les champs et validez le formulaire ; les traductions sont 
automatiquement créées ou modifiées
<p>
<img src="../images/internat.png" border=0>
<p>Vous pouvez vérifier l'effet en appelant le script que vous venez de 
traiter et en changeant l'ordre des langues dans les préférences
<p>La traduction est conservée dans un fichier qui est commun à tous les 
fichiers d'un même répertoire. On peut aussi éditer tout le dictionnaire 
en cliquant sur le premier élément de la liste des scripts
<h2>17.3 Prise en charge d'Unicode</h2>
<h3>Nouveau dans la version 2.2.2</h3>
<i>écrit principalement par Radovan Garabik</i>
<p>Unicode est un standard normalisé qui sert à représenter tous les styles
d'écriture dans le monde. Pour chaque signe (une lettre dans un alphabet, un
idéogramme dans une langue asiatique), Unicode définit un nombre unique,
appelé "point de code". Comme les ordinateurs et les réseaux ne savent
manipuler que des octets, une correspondance doit être définie entre ces
"points de code" et un ou plusieurs octets ; ces correspondances sont appelées
"encodages"
<p>Du fait qu'il existe beaucoup d'encodages différents, quand un programme
doit imprimer un signe (une lettre grecque, un signe chinois) il doit recevoir
<b>deux</b> informations : la chaîne de caractères qui représente le signe (une 
séquence d'octets) <b>et</b> l'encodage utilisé. S'il reçoit seulement une 
chaîne, le programme peut essayer de deviner l'encodage (c'est ce que fait
généralement un navigateur web) mais sans aucune garantie de succès
<p>Karrigell définit deux paramètres du fichier de configuration pour prendre
en charge Unicode :
<ul>
<li><CODE>encodeFormData</CODE> : s'il est initialisé à 1, Karrigell cherche à 
convertir les données des formulaires en chaînes Unicode, en essayant successivement
plusieurs encodages. Plus précisément, si les données reçues ne comportent que des
caractères ASCII, il n'y a pas de conversion en Unicode, on conserve la chaîne
telle quelle ; sinon le programme essaie plusieurs encodages
<br>Les données de formulaires accessibles dans QUERY sont donc soit des chaînes 
ordinaires soit des chaînes Unicode
<br>Par défaut <CODE>encodeFormData</CODE> vaut 0 : aucune conversion en Unicode 
n'est effectuée
<li><CODE>outputEncoding</CODE> : définit l'encodage que le navigateur doit utiliser
pour interpréter les chaînes de caractères qu'on lui demande d'afficher. La valeur
par défaut est <CODE>'ISO-8859-1'</CODE>, qui sert à représenter
les signes des langues européennes basées sur l'alphabet latin. Vous pouvez
définir un autre encodage en donnant une valeur à l'option <code>outputEncoding
</code> dans la section <CODE>[Server]</CODE> du fichier de configuration
<p>Vous pouvez regarder des exemples dans le répertoire demo/unicode : 
donnez à outputEncoding la valeur <CODE>utf-8</CODE> pour voit le résultat attendu
</ul>
<p>
<hr align="left" width="10%">
<a name="note1">(1) Sur Microsoft Internet Explorer la préférence de langue 
est définie par Outils/Options Internet/Général/Langues ; les langues 
acceptées sont sélectionnées à partir d'une liste et classées par ordre de 
préférence. Sur Netscape utiliser Edition/Préférences/Langues
<p>
</body>
</html>
</td>
</tr></table>